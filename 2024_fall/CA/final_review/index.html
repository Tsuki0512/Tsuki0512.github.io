
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="wyr">
      
      
        <link rel="canonical" href="https://tsuki0512.github.io/2024_fall/CA/final_review/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../CA1/">
      
      
      <link rel="icon" href="../../../assets/hzhf.jpg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>期末复习 - wyr's notes</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=LXGW+WenKai+Screen+GB+Screen:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"LXGW WenKai Screen GB Screen";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets.css">
    
      <link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css">
    
      <link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="wyr&#39;s notes" class="md-header__button md-logo" aria-label="wyr's notes" data-md-component="logo">
      
  <img src="../../../assets/hzhf.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            wyr's notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              期末复习
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Tsuki0512/Tsuki0512.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Wyr's Notes
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="wyr&#39;s notes" class="md-nav__button md-logo" aria-label="wyr's notes" data-md-component="logo">
      
  <img src="../../../assets/hzhf.jpg" alt="logo">

    </a>
    wyr's notes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Tsuki0512/Tsuki0512.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Wyr's Notes
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    专业课程
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            专业课程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    数据结构基础
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            数据结构基础
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../FDS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    期中前内容
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../FDS2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    图论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../FDS3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    排序
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dip%E5%8E%86%E5%B9%B4%E5%8D%B7%E6%95%B4%E7%90%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    图像信息处理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E9%80%BB%E6%9C%9F%E6%9C%AB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数字逻辑设计
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS_%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    高级数据结构与算法分析
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    数据库系统
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            数据库系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cheatingsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../minisql%E5%88%86%E6%9E%90/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Minisql分析
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    计算机体系结构
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            计算机体系结构
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    期末复习
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    期末复习
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1 计算机设计基础
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1 计算机设计基础">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#10" class="md-nav__link">
    <span class="md-ellipsis">
      1.0 知识框架概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 性能衡量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 设计理念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-isa" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 ISA
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2 流水线
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 流水线">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#20" class="md-nav__link">
    <span class="md-ellipsis">
      2.0 流水线概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#21-overlapping" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 流水线的overlapping设计
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 流水线性能评估
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 流水线性能评估">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-throughput" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.1 吞吐率Throughput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-speedup" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.2 加速比Speedup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-efficiency" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.3 效率Efficiency
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 流水线冒险
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 非线性流水线调度问题
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3 内存层次
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 内存层次">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 内存性能衡量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-cache" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Cache设计
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 Cache设计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-block-placement" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.1 Block Placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-block-identification" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.2 Block Identification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-block-replacement" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.3 Block Replacement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-write-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.4 Write Strategy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 虚拟内存
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 虚拟内存">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#331" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.1 虚拟内存设计问题
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#332-page-tabletlb-cache" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.2 page table和TLB - cache对于虚拟内存的管理和优化
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4 指令集并行
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 指令集并行">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-scoreboard" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 Scoreboard
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 Scoreboard">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#411-instruction-status" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.1 Instruction Status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#412-function-component-status" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.2 Function Component Status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#413-register-status" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.3 Register Status
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-tomasulo" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Tomasulo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2 Tomasulo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#421-tomasulo" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.1 基本的Tomasulo结构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2.1 基本的Tomasulo结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4211" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.1.1 执行流程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4212" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.1.2 数据表格
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4213" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.1.3 例题
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#422-rob-reorder-buffer" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.2 ROB (reorder buffer)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2.2 ROB (reorder buffer)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4221" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.2.1 执行顺序
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4222" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.2.2 数据表格
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4223" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.2.3 例题
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 多流出的流水线
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3 多流出的流水线">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#431-superscalar" class="md-nav__link">
    <span class="md-ellipsis">
      4.3.1 Superscalar
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3.1 Superscalar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4311" class="md-nav__link">
    <span class="md-ellipsis">
      4.3.1.1 静态调度超标量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4312" class="md-nav__link">
    <span class="md-ellipsis">
      4.3.1.2 动态调度超标量
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#432-super-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      4.3.2 Super pipeline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#433-vliw" class="md-nav__link">
    <span class="md-ellipsis">
      4.3.3 VLIW
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-dlp" class="md-nav__link">
    <span class="md-ellipsis">
      5 DLP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5 DLP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-simd-vector-processor" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 SIMD - Vector Processor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.1 SIMD - Vector Processor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#511" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.1 向量基本计算方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#512-cray-1" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.2 CRAY-1及其分析
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.1.2 CRAY-1及其分析">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#5121" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.2.1 向量指令相关性及其处理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5122-cray-1" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.2.2 CRAY-1指令类型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5123-cray-1" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.2.3 CRAY-1的向量链接技术
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#513-rv64v" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.3 RV64V
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#514-nvidia-gpu" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.4 NVIDIA GPU
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-llp" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 LLP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-tlp" class="md-nav__link">
    <span class="md-ellipsis">
      6 TLP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6 TLP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 多处理器的内存架构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.1 多处理器的内存架构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#611-shared-memory-system" class="md-nav__link">
    <span class="md-ellipsis">
      6.1.1 Shared Memory System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#612-message-passing-system" class="md-nav__link">
    <span class="md-ellipsis">
      6.1.2 Message Passing System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#613-uma" class="md-nav__link">
    <span class="md-ellipsis">
      6.1.3 UMA
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#614-numa" class="md-nav__link">
    <span class="md-ellipsis">
      6.1.4 NUMA
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-cache-coherence-and-memory-consistency" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 Cache coherence and memory consistency
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.2 Cache coherence and memory consistency">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#621-snoopy-coherence-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      6.2.1 Snoopy Coherence Protocol
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.2.1 Snoopy Coherence Protocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#6211-write-through" class="md-nav__link">
    <span class="md-ellipsis">
      6.2.1.1 Write Through
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6212-write-back" class="md-nav__link">
    <span class="md-ellipsis">
      6.2.1.2 Write back
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6213-false-sharing" class="md-nav__link">
    <span class="md-ellipsis">
      6.2.1.3 False Sharing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#622-directory-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      6.2.2 Directory Protocol
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#623-memory-consistency" class="md-nav__link">
    <span class="md-ellipsis">
      6.2.3 Memory consistency
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CA1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    计算机设计基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CA2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    流水线
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CA3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    内存层次
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CA4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    指令级并行
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CA5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DLP和TLP
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OS/final_review/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    操作系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../%E8%AE%A1%E7%AE%97%E7%90%86%E8%AE%BA/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    计算理论
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            计算理论
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%AE%A1%E7%AE%97%E7%90%86%E8%AE%BA/Lec1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%AE%A1%E7%AE%97%E7%90%86%E8%AE%BA/Lec2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    REX
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CN/CN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    计算机网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../2025_spring/cp/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    编译原理
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            编译原理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/midterm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    期中梳理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/chap1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/chap2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lexical Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/chap3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parsing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/chap4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Abstract Syntax
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/chap5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Semantic Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/type_checking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Type Checking (期末梳理版)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/chap6_for_final/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Activation Record
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/chap7_for_final/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IR Trees
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/chap8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Blocks and Traces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/chap9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Instruction Selection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/chap10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Liveness Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/chap11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Register Allocation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/chap13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Garbage Collection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/chap14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Object-Oriented Languages
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/cp/chap18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Loop Optimizations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_11" >
        
          
          <label class="md-nav__link" for="__nav_2_11" id="__nav_2_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    软件工程（学习中）
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_11">
            <span class="md-nav__icon md-icon"></span>
            软件工程（学习中）
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/se/final/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    期末刷题记录
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_12" >
        
          
          <label class="md-nav__link" for="__nav_2_12" id="__nav_2_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    自然语言处理导论（待完善）
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_12">
            <span class="md-nav__icon md-icon"></span>
            自然语言处理导论（待完善）
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/nlp/DeepLearningBasics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deep Learning Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/nlp/WordEmbedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Word Embedding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/nlp/ConvolutionalNeuralNetworks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Convolutional Neural Networks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/nlp/RecurrentNeuralNetworks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recurrent Neural Networks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/nlp/Attention/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Attention
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/nlp/NLGAndNMT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NLGandNMT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/nlp/Transformer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transformers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_13" >
        
          
          <label class="md-nav__link" for="__nav_2_13" id="__nav_2_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    数理基础课程资源汇总
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_13">
            <span class="md-nav__icon md-icon"></span>
            数理基础课程资源汇总
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    离散数学及其应用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%BE%AE%E7%A7%AF%E5%88%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    微积分（甲）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%A4%A7%E7%89%A9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    大学物理（乙）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%BA%BF%E4%BB%A3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    线性代数（甲）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../C%E7%A8%8B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C程序设计基础
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    论文阅读
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            论文阅读
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../2025_spring/%E5%A4%9A%E6%A8%A1%E6%80%81/paper%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    多模态大模型
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    课程心得
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            课程心得
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%80%9A%E8%AF%86%E8%AF%BE%E5%BF%83%E5%BE%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    通识课
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E7%90%86%E5%9F%BA%E7%A1%80%E8%AF%BE%E5%BF%83%E5%BE%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数理基础课
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%93%E4%B8%9A%E5%BF%85%E4%BF%AE%E8%AF%BE%E5%BF%83%E5%BE%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    专业必修课
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%93%E4%B8%9A%E9%80%89%E4%BF%AE%E8%AF%BE%E5%BF%83%E5%BE%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    专业选修课
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%A2%8E%E7%A2%8E%E5%BF%B5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    一些碎碎念
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    CMU_DeepVision项目记录
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            CMU_DeepVision项目记录
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CMU_index/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    概述
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CMU_prelearning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    线上课程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pytorch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pytorch入门
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CMU_DeepVision_0807/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lec1 - Transformers and RAG
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CMU_DeepVision_0807_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lec2 - Ray Tracing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CMU_DeepVision_0809/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lec3 - 3D Vision
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CMU_DeepVision_0816/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lec4 - Deep Learning Basics and Adversarial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1 计算机设计基础
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1 计算机设计基础">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#10" class="md-nav__link">
    <span class="md-ellipsis">
      1.0 知识框架概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 性能衡量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 设计理念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-isa" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 ISA
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2 流水线
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 流水线">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#20" class="md-nav__link">
    <span class="md-ellipsis">
      2.0 流水线概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#21-overlapping" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 流水线的overlapping设计
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 流水线性能评估
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 流水线性能评估">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-throughput" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.1 吞吐率Throughput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-speedup" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.2 加速比Speedup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-efficiency" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.3 效率Efficiency
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 流水线冒险
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 非线性流水线调度问题
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3 内存层次
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 内存层次">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 内存性能衡量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-cache" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Cache设计
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 Cache设计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-block-placement" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.1 Block Placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-block-identification" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.2 Block Identification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-block-replacement" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.3 Block Replacement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-write-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.4 Write Strategy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 虚拟内存
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 虚拟内存">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#331" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.1 虚拟内存设计问题
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#332-page-tabletlb-cache" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.2 page table和TLB - cache对于虚拟内存的管理和优化
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4 指令集并行
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 指令集并行">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-scoreboard" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 Scoreboard
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 Scoreboard">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#411-instruction-status" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.1 Instruction Status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#412-function-component-status" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.2 Function Component Status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#413-register-status" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.3 Register Status
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-tomasulo" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Tomasulo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2 Tomasulo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#421-tomasulo" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.1 基本的Tomasulo结构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2.1 基本的Tomasulo结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4211" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.1.1 执行流程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4212" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.1.2 数据表格
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4213" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.1.3 例题
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#422-rob-reorder-buffer" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.2 ROB (reorder buffer)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2.2 ROB (reorder buffer)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4221" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.2.1 执行顺序
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4222" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.2.2 数据表格
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4223" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.2.3 例题
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 多流出的流水线
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3 多流出的流水线">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#431-superscalar" class="md-nav__link">
    <span class="md-ellipsis">
      4.3.1 Superscalar
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3.1 Superscalar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4311" class="md-nav__link">
    <span class="md-ellipsis">
      4.3.1.1 静态调度超标量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4312" class="md-nav__link">
    <span class="md-ellipsis">
      4.3.1.2 动态调度超标量
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#432-super-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      4.3.2 Super pipeline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#433-vliw" class="md-nav__link">
    <span class="md-ellipsis">
      4.3.3 VLIW
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-dlp" class="md-nav__link">
    <span class="md-ellipsis">
      5 DLP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5 DLP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-simd-vector-processor" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 SIMD - Vector Processor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.1 SIMD - Vector Processor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#511" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.1 向量基本计算方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#512-cray-1" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.2 CRAY-1及其分析
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.1.2 CRAY-1及其分析">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#5121" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.2.1 向量指令相关性及其处理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5122-cray-1" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.2.2 CRAY-1指令类型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5123-cray-1" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.2.3 CRAY-1的向量链接技术
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#513-rv64v" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.3 RV64V
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#514-nvidia-gpu" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.4 NVIDIA GPU
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-llp" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 LLP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-tlp" class="md-nav__link">
    <span class="md-ellipsis">
      6 TLP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6 TLP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 多处理器的内存架构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.1 多处理器的内存架构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#611-shared-memory-system" class="md-nav__link">
    <span class="md-ellipsis">
      6.1.1 Shared Memory System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#612-message-passing-system" class="md-nav__link">
    <span class="md-ellipsis">
      6.1.2 Message Passing System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#613-uma" class="md-nav__link">
    <span class="md-ellipsis">
      6.1.3 UMA
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#614-numa" class="md-nav__link">
    <span class="md-ellipsis">
      6.1.4 NUMA
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-cache-coherence-and-memory-consistency" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 Cache coherence and memory consistency
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.2 Cache coherence and memory consistency">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#621-snoopy-coherence-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      6.2.1 Snoopy Coherence Protocol
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.2.1 Snoopy Coherence Protocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#6211-write-through" class="md-nav__link">
    <span class="md-ellipsis">
      6.2.1.1 Write Through
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6212-write-back" class="md-nav__link">
    <span class="md-ellipsis">
      6.2.1.2 Write back
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6213-false-sharing" class="md-nav__link">
    <span class="md-ellipsis">
      6.2.1.3 False Sharing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#622-directory-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      6.2.2 Directory Protocol
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#623-memory-consistency" class="md-nav__link">
    <span class="md-ellipsis">
      6.2.3 Memory consistency
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="_1">体系结构期末复习<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p>cheating sheet:（单击链接即可下载）
<a href="../assets/CheatingSheet_CA_Wyr.pdf">CA_cheating_sheet</a><br>
注：非线性流水线可以不抄，除了cr老师其他老师好像没讲，其他可能有少许笔误，具体以笔记为准。</p>
<!--
开头有很多情报/废话，[正文从这里开始](https://tsuki0512.github.io/2024_fall/CA/final_review/#1)。

----

*一点期末考情报*

期末章节分数分布：

![65200f6ec9e9e5760be4e24cfc3736c](./markdown-img/final_review.assets/65200f6ec9e9e5760be4e24cfc3736c.jpg)

hsb老师重点：监听协议、MESI...

jxh老师重点：

![image-20241225182016298](./markdown-img/final_review.assets/image-20241225182016298.png)

cr老师重点：

1. 量化分析：CPU performance，Amdahl's law，Cache performance， 流水线分析
2. pipeline的大题会出在ILP部分；体系最核心的东西围绕ISA展开，重点是实验的内容，数据通路，控制通路
3. hazard的各种情况和分类，要能指出具体例子的各种类型hazard
4. memory hierarchy、了解cache的四个question，性能分析和性能优化哪些方式是通过什么角度做的优化，write strategy每一种是什么样的
5. TLB的工作原理及各项包含的内容，virtual memory的各种块大小计算
6. ILP要看题设条件，可能会变每个器件的数量
7. scoreboard三个表的每一个项的含义，某一个时刻下应该是什么状态（不要和整体的弄混了）
8. tomasulo's approach每一个时刻的表，ROB，IS段流入一直是顺序的；多流出的情况及其实现（super pipeline - 加硬件实现流水线细分，解决性能分析里面的瓶颈问题，VLIW通过编译调度实现）
9. DLP and TLP。Flynn分类法的四个类型（SISD - 知道概念；SIMD - 向量计算，Array Processor不考；以Cray-1为例做的各个部分的分析（考试可能会改），向量处理机的优化 - 重点是link，分析能不能link，各种情况，给一段程序分析哪里可以链接可能不止一处，怎么分析clock cycle，RV64V、NVIDIA GPU的向量技术；和循环有关的并行Loop-Level Parallelism，如果是跨迭代相关就没法做向量链接了，如何消除；MISD不用管；MIMD：会考一些概念，对照课本UMA和NUMA的概念，其他的变形不会考；一致性协议一模一样的不会考了，snooping三四五态等等，不用记状态，考试都会给，根据操作要会判断状态的转换的过程）

cr复习ppt和去年的不同：

1. 常规流水线红星星去掉了，估计之前有大题今年没有了，把重点放ILP了

2. ISA去掉了一些内容，保留了设计原则和GPR Classification

3. 冲突类型由蓝星星变成红星星，甚至有两颗：

   ![image-20241226131043863](./markdown-img/final_review.assets/image-20241226131043863.png)

4. AMAT由蓝星星变成皇冠：<img src="./markdown-img/final_review.assets/image-20241226131122064.png" alt="image-20241226131122064" style="zoom:50%;" />

5. 重点来了，这三页是新加的：

   ![image-20241226131233170](./markdown-img/final_review.assets/image-20241226131233170.png)

6. scoreboard和tomasulo本来的蓝星星变成了皇冠，没有加星星的加了蓝星星，感觉会考大题

7. 这页ppt加了很多表：![image-20241226131421870](./markdown-img/final_review.assets/image-20241226131421870.png)

8. 重点又来了！SIMD里面的向量处理机部分全是新加的（从CRAY-1一直到Loop-Level Parallelism）

9. MIMD反而简略了，可能是不考特别难的大题了
-->
<hr />
<p>现在回过头来看chap0的ppt的一些废话：</p>
<ul>
<li>感觉体系结构从某种程度上讲确实是哲学课</li>
<li>着眼于优化性能的设计理念以及<strong>why</strong></li>
<li>不哲学一点讲体系结构就是软硬件协同部分的设计和原理</li>
</ul>
<hr />
<h2 id="1">1 计算机设计基础<a class="headerlink" href="#1" title="Permanent link">&para;</a></h2>
<p><em>对应考纲第一章 - 概述及量化分析基础</em></p>
<ul>
<li>CPU performance</li>
<li>Amdahl's law</li>
</ul>
<h3 id="10">1.0 知识框架概述<a class="headerlink" href="#10" title="Permanent link">&para;</a></h3>
<p>计算机的发展基本可以概括为三个领域，对应三种特性：</p>
<ul>
<li>processing --- parallel</li>
<li>transmission --- accuracy</li>
<li>storage --- reliability</li>
</ul>
<p>第一章就从顶层视角讲了一些如何量化评估performance以及一些设计的理念。</p>
<h3 id="11">1.1 性能衡量<a class="headerlink" href="#11" title="Permanent link">&para;</a></h3>
<p>根据不同的用户需求，我们有衡量性能最基本的两个指标：</p>
<ul>
<li>PC用户 - 最短<strong>响应时间</strong> <span class="arithmatex">\(\to\)</span> Latency / Response time 响应时间 - 一个事件开始到结束的时间</li>
<li>大数据处理 - 最大<strong>吞吐量</strong> <span class="arithmatex">\(\to\)</span> Throughput / Bandwidth 带宽 - 给定时间范围内完成了多少工作量</li>
</ul>
<p>对于单核处理器的性能评估，我们使用CPU time，具体有以下公式：</p>
<p><img alt="image-20241220213704250" src="../markdown-img/final_review.assets/image-20241220213704250.png" /></p>
<p>主要公式为：<span class="arithmatex">\(CPU Time = \frac{\text{Instruction Count} \times \text{CPI}}{\text{Clock Rate}}\)</span></p>
<p>而涉及到系统性能收益的提升，我们有：</p>
<ol>
<li>
<p>Amdahl's Law - 单点优化对系统整体性能提升的收益</p>
<p>对应的设计理念是make common case fast</p>
<p><img alt="image-20241220213930819" src="../markdown-img/final_review.assets/image-20241220213930819.png" /></p>
</li>
<li>
<p>加速比 - 性能是执行时间的倒数，相关公式如下：</p>
<p><img alt="image-20241220214051221" src="../markdown-img/final_review.assets/image-20241220214051221.png" /></p>
</li>
</ol>
<p><em>其实我觉得这块掌握基本概念就可以，倒也没必要死记硬背。</em></p>
<h3 id="12">1.2 设计理念<a class="headerlink" href="#12" title="Permanent link">&para;</a></h3>
<p><em>从计组开始老生常谈的八大设计理念（cr复习ppt上有</em></p>
<p><img alt="image-20241220214455762" src="../markdown-img/final_review.assets/image-20241220214455762.png" /></p>
<h3 id="13-isa">1.3 ISA<a class="headerlink" href="#13-isa" title="Permanent link">&para;</a></h3>
<p>指令集是什么？</p>
<ul>
<li>我的理解是高级语言和机器语言的桥梁，人类能看懂的最low level的语言</li>
</ul>
<p>指令集架构设计的几个问题（这些问题的不同决定了不同类型的指令集）：</p>
<ol>
<li>操作数存哪 - 寄存器、内存、栈、累加器...</li>
<li>几个操作数 - 0、1、2、3...</li>
<li>操作寻址方式 - 寄存器、立即数、非直接寻址...</li>
<li>支持什么类型和大小的操作数 - 整数、浮点数、字符、字符串、向量...</li>
<li>支持什么操作类型 - 加、减、乘、比较、移动...</li>
</ol>
<p>指令集架构设计原则：兼容，通用，高效，安全。</p>
<p>GPR classification:</p>
<p><img alt="image-20250102000341561" src="../markdown-img/final_review.assets/image-20250102000341561.png" /></p>
<h2 id="2">2 流水线<a class="headerlink" href="#2" title="Permanent link">&para;</a></h2>
<p><em>对应考纲第三章 - ILP</em></p>
<ul>
<li>Pipeline hazard</li>
<li>Branch prediction</li>
</ul>
<h3 id="20">2.0 流水线概述<a class="headerlink" href="#20" title="Permanent link">&para;</a></h3>
<p><img alt="image-20241221204727974" src="../markdown-img/final_review.assets/image-20241221204727974.png" /></p>
<p>体系结构的流水线部分主要分为以下知识点：</p>
<ol>
<li>指令执行方式：串行、有重叠、两次重叠、流水线...</li>
<li>流水线的分类：单功能/多功能（静态/动态）、不同粒度、线性/非线性、顺序/乱序、标量/向量处理器...<ul>
<li>这块不额外理了，看到上述概念要清楚地知道区别，不清楚的可以查看<a href="https://tsuki0512.github.io/2024_fall/CA/CA2/#classes-of-pipelining">课堂笔记</a></li>
</ul>
</li>
<li>流水线性能评估：吞吐量、加速比、效率...</li>
<li>影响流水线性能的因素：流水线的设计、指令类型、指令相关性及其处理<ul>
<li>冲突类型：<img alt="image-20241221204437739" src="../markdown-img/final_review.assets/image-20241221204437739.png" /></li>
</ul>
</li>
<li>动态分支预测：BHT、BTB</li>
<li>流水线非线性规划问题</li>
</ol>
<h3 id="21-overlapping">2.1 流水线的overlapping设计<a class="headerlink" href="#21-overlapping" title="Permanent link">&para;</a></h3>
<p>实现流水线的本质是通过overlap。将指令进行分段后可以让每一段使用不同的部件，并行执行。</p>
<ul>
<li>每段时间如果不一致会引起：<ul>
<li>前面的阶段较长 - 资源浪费</li>
<li>后面的阶段较长 - 部件冲突</li>
</ul>
</li>
<li>分成三段后的时间计算：<ul>
<li>串行 - <span class="arithmatex">\(3n\Delta t\)</span></li>
<li>Single overlap - <span class="arithmatex">\((2n+1)\Delta t\)</span></li>
<li>Twice overlap - <span class="arithmatex">\((n+2)\Delta t\)</span></li>
<li>trade-off是硬件更复杂了</li>
<li>流水线被分为几段称为流水线的深度</li>
</ul>
</li>
<li>实现重叠的具体方式：<ul>
<li>I Mem和D Mem区分避免结构冲突</li>
<li>使用buffer缩短IF阶段时间使其和ID阶段合并</li>
<li>也可以使用buffer平滑每段时间的差异：使得两个流水线阶段不需要直接连接，可以有空隙，流水线执行时间完全取决于EX段</li>
</ul>
</li>
</ul>
<h3 id="22">2.2 流水线性能评估<a class="headerlink" href="#22" title="Permanent link">&para;</a></h3>
<h4 id="221-throughput">2.2.1 吞吐率Throughput<a class="headerlink" href="#221-throughput" title="Permanent link">&para;</a></h4>
<p>定义是<span class="arithmatex">\(\frac{指令数量}{执行时间}\)</span>，没有量纲。</p>
<p>我们把最长的流水线段称为瓶颈段（时间为<span class="arithmatex">\(\Delta t\)</span>），可以看到（推导出）<span class="arithmatex">\(TP_{max} = \frac{1}{\Delta t}\)</span></p>
<p>针对瓶颈段的优化方式有：</p>
<ul>
<li>subdivision - 给瓶颈段分段执行</li>
<li>repetition - 在瓶颈段多使用几个部件并行执行</li>
</ul>
<h4 id="222-speedup">2.2.2 加速比Speedup<a class="headerlink" href="#222-speedup" title="Permanent link">&para;</a></h4>
<p><span class="arithmatex">\(S_p = \dfrac{n\times m \times \Delta t_0}{(m+n-1)\times \Delta t_0} = \dfrac{n \times m}{m+n-1}\)</span>，没有量纲。</p>
<p>在<span class="arithmatex">\(n &gt;&gt; m\)</span>的时候加速比约等于段数<span class="arithmatex">\(m\)</span>，但是受数据读取传输损耗影响，段数不能无限大。</p>
<h4 id="223-efficiency">2.2.3 效率Efficiency<a class="headerlink" href="#223-efficiency" title="Permanent link">&para;</a></h4>
<p>具象化理解就是流水线时空图里面有颜色的占总长方形之比。单位是百分比。</p>
<p><span class="arithmatex">\(\eta = \dfrac{n\times m \times \delta t_0}{m(m+n-1)\delta t_0} = \dfrac{n}{m+n-1}\)</span></p>
<p>在<span class="arithmatex">\(n &gt;&gt; m\)</span>的时候效率约等于<span class="arithmatex">\(100\%\)</span>。</p>
<p>记得看看<a href="https://tsuki0512.github.io/2024_fall/CA/CA2/#pipeline-performance">这两道例题</a></p>
<h3 id="23">2.3 流水线冒险<a class="headerlink" href="#23" title="Permanent link">&para;</a></h3>
<p>感觉这一块lab1和3写过都差不多清楚了，稍微理个框架吧。细节看<a href="https://tsuki0512.github.io/2024_fall/CA/CA2/#hazards-of-pipelining">课堂笔记</a></p>
<p>流水线的冒险可以分为以下几类：</p>
<ul>
<li>结构冒险 - 多条指令征用同一种资源<ul>
<li>解决方式：加bubble、加硬件、分I-cache和D-cache...</li>
</ul>
</li>
<li>数据冒险<ul>
<li>Data dependence: RAW<ul>
<li>可以通过调度指令解决<ul>
<li>静态调度：编译器，程序运行前</li>
<li>动态调度：处理器，程序运行时</li>
</ul>
</li>
<li>Forwarding 和 Stalling - 需要清楚判断条件<ul>
<li>EX hazard</li>
<li>MEM hazard (double hazard)</li>
<li>Load-use hazard - 需要额外stall一拍</li>
</ul>
</li>
</ul>
</li>
<li>Name dependence: WAR/WAW<ul>
<li>Anti-dependence - 毫不相干的两个操作数使用了同一个寄存器</li>
<li>Output-dependence - 两条指令的结果写到同一个寄存器内</li>
<li>在顺序流水线重命名寄存器即可解决，乱序流水线可能有冲突冒险</li>
</ul>
</li>
</ul>
</li>
<li>控制冒险 - 采用分支预测减少stall<ul>
<li>静态分支预测<ul>
<li>延时槽</li>
</ul>
</li>
<li>动态分支预测<ul>
<li>BTB - 1 bit、2 bits...</li>
<li>BHT</li>
</ul>
</li>
<li><em>这里也会有data hazard，处理思路也是能forward就forward，否则stall</em></li>
</ul>
</li>
</ul>
<h3 id="24">2.4 非线性流水线调度问题<a class="headerlink" href="#24" title="Permanent link">&para;</a></h3>
<p>看懂这个<a href="https://tsuki0512.github.io/2024_fall/CA/CA2/#schedule-of-nonlinear-pipelining">例子</a>就行。</p>
<p>大致思路如下：</p>
<ol>
<li>Initial conflict vector - 先不考虑时序问题，对每一个部件分开看，对每一个部件隔x拍会冲突的第x二进制位（最右边是第一位）设置为1，取每个部件的与，为0的位为下一条指令可以进来的拍数。</li>
<li>Conflict vector - 隔几拍就把原来的冲突向量右移几位，和新的冲突向量取与，为0的位为下一条指令可以进来的拍数。</li>
<li>State transition graph - 重复上述操作直到找到一个循环的调度（状态指的是当前的总的冲突向量）。</li>
</ol>
<h2 id="3">3 内存层次<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<p><em>对应考纲第二章 - Memory Hierarchy</em></p>
<ul>
<li>Chace performance</li>
<li>Write policy</li>
</ul>
<h3 id="31">3.1 内存性能衡量<a class="headerlink" href="#31" title="Permanent link">&para;</a></h3>
<!--

基于几个公式的计算：

1. 从CPU的执行和stall角度分类讨论：

   $CPUtime=IC \times (CPI_{Execution} + \frac{MemAccess}{Inst} \times MissRate \times MissPenalty) \times CycleTime$

   这里要注意$MemAccess = InstAccess + DataAccess$

2. 从CPU的指令类型（ALU还是Memory指令）分类讨论：

      - $AMAT(\text{Average Memory Access Time}) = \frac{\text{Whole accesses time}}{\text{All memory accesses in program}}$

        $ = (HitTime_{Inst} + MissRate_{Inst} \times MissPenalty_{Inst}) \times Inst\% + (HitTime_{Data} + MissRate_{Data} \times MissPenalty_{Data}) \times Data\%$

      - $CPU_{time} = IC \times (\frac{AluOps}{Inst}\times CPI_{AluOps} + \frac{MemAccess}{Inst}\times AMAT)\times CycleTime$

        $=(AluOps \times CPI_{AluOps} + MemAccess \times AMAT) \times Cycletime$ *我觉得这样理解会清楚一点*

-->

<p><img alt="image-20250101183744051" src="../markdown-img/final_review.assets/image-20250101183744051.png" /></p>
<p>然后几个例题（建议自己做一遍或者抄到A4上）：</p>
<p><img alt="image-20241225202143663" src="../markdown-img/final_review.assets/image-20241225202143663.png" /></p>
<p><em>注：example1的AMAT计算我觉得HitTime应该用1.1（好像也不对，看了eg3我觉得ideal CPI和hittime也不是一回事情），不知道为什么这里是1，有待确认。</em></p>
<p><em>re：默认的HitTime就是1个clock cycle（注意换算成具体时间的时候要×cycle time），但是一般情况下都会给出，HitTime和ideal CPI不是一回事情</em></p>
<p>基于AMAT的优化方向：</p>
<ol>
<li>减少miss penalty<ul>
<li>multilevel caches、critical word first、read miss before write miss、merging write buffers、victim caches</li>
</ul>
</li>
<li>减少miss rate<ul>
<li><strong>larger block size、larger cache size、higher associativity、</strong>way prediction、pseudo-associativity、compiler optimizations</li>
<li><em>对miss rate、AMAT的影响趋势，不会考技术细节</em></li>
</ul>
</li>
<li>减少hit time<ul>
<li>small and simple caches、avoiding address translation、pipelined cache access、trace caches</li>
</ul>
</li>
<li>通过并行减少miss rate和miss penalty<ul>
<li>non-blocking caches、hardware prefetching、compiler prefetching</li>
</ul>
</li>
</ol>
<h3 id="32-cache">3.2 Cache设计<a class="headerlink" href="#32-cache" title="Permanent link">&para;</a></h3>
<p>基于计组的时候的四个问题：</p>
<h4 id="321-block-placement">3.2.1 Block Placement<a class="headerlink" href="#321-block-placement" title="Permanent link">&para;</a></h4>
<ul>
<li>Direct mapped - 相当于一路组相连</li>
<li>Fully associative - 相当于n路组相连（n是cache的块数）</li>
<li>Set associative</li>
</ul>
<h4 id="322-block-identification">3.2.2 Block Identification<a class="headerlink" href="#322-block-identification" title="Permanent link">&para;</a></h4>
<p>使用tag辨别是否为同一个block：</p>
<p><img alt="image-20241225210026778" src="../markdown-img/final_review.assets/image-20241225210026778.png" /></p>
<h4 id="323-block-replacement">3.2.3 Block Replacement<a class="headerlink" href="#323-block-replacement" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Random</p>
</li>
<li>
<p>LRU - a stack replacement algorithm（同一时刻n块内的block是n+1块内block的子集）</p>
<ul>
<li>
<p>我们可以用栈模拟LRU的过程，清楚看到不同栈大小下的命中率</p>
<p><img alt="image-20241225210910437" src="../markdown-img/final_review.assets/image-20241225210910437.png" /></p>
</li>
<li>
<p>我们可以用Comparison Pair Method实现LRU算法，核心部件是门和触发器：</p>
<ul>
<li>
<p>基本变量：用一个触发器表示两个块相对先后访问顺序，比如<span class="arithmatex">\(T_{AB}\)</span>在A最近被访问时为1，B最近被访问的时候为0</p>
</li>
<li>
<p>寻找被替换的块：在所有<span class="arithmatex">\(T_{XY}\)</span>中均为最近不被访问的块</p>
</li>
</ul>
<p><img alt="image-20241225211229089" src="../markdown-img/final_review.assets/image-20241225211229089.png" /></p>
<ul>
<li>每次访问块的维护：访问<span class="arithmatex">\(A\)</span>后将所有<span class="arithmatex">\(T_{AX}\)</span>置1或<span class="arithmatex">\(T_{XA}\)</span>置0</li>
</ul>
</li>
</ul>
</li>
<li>
<p>FIFO - not a stack replacement algorithm, 有belady现象（随着n增大命中率下降）</p>
</li>
<li>
<p>OPT</p>
</li>
</ul>
<h4 id="324-write-strategy">3.2.4 Write Strategy<a class="headerlink" href="#324-write-strategy" title="Permanent link">&para;</a></h4>
<p><img alt="image-20241230150445943" src="../markdown-img/final_review.assets/image-20241230150445943.png" /></p>
<ul>
<li>
<p>Write Hit</p>
<ul>
<li><strong>Write Through</strong>：同时写回内存和cache。</li>
</ul>
<p>写到内存的时间较长，这个过程需要 <strong>Write Stall</strong>，或者使用 <strong>Write Buffer</strong>（节省stall的时间）。</p>
<ul>
<li><strong>Write Back</strong>：只在 Cache 中写，不写入memory，同时通过一个额外的 dirty bit 表示这个块已经被修改。</li>
</ul>
</li>
<li>
<p>Write Miss</p>
<ul>
<li><strong>Write Around</strong>(no-write allocate)：直接写到内存。</li>
<li><strong>Write Allocate</strong>：将要写的块先读到 Cache 中，再写。</li>
</ul>
</li>
<li>
<p>In general, <strong>write-back</strong> caches use <strong>write-allocate</strong> , and <strong>write-through</strong> caches use <strong>write-around</strong>.</p>
</li>
<li>
<p>write allocate可以降低miss的rate。</p>
</li>
</ul>
<h3 id="33">3.3 虚拟内存<a class="headerlink" href="#33" title="Permanent link">&para;</a></h3>
<p>virtual memory的范围是黄框部分：</p>
<p><img alt="image-20241225214341366" src="../markdown-img/final_review.assets/image-20241225214341366.png" /></p>
<p><em>os提到的这里不详细理了，就列个框架。</em></p>
<ul>
<li>物理地址和虚拟地址的转换</li>
<li>内存保护和共享</li>
<li>分页式和分段式</li>
</ul>
<h4 id="331">3.3.1 虚拟内存设计问题<a class="headerlink" href="#331" title="Permanent link">&para;</a></h4>
<ol>
<li>block placement - 为了降低miss rate采取全相联</li>
<li>block identification - 页号作为索引</li>
<li>block replacement - LRU</li>
<li>write strategy - write back with dirty bit, 在不得不写回disk的时候写回</li>
</ol>
<h4 id="332-page-tabletlb-cache">3.3.2 page table和TLB - cache对于虚拟内存的管理和优化<a class="headerlink" href="#332-page-tabletlb-cache" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>提出背景：如果我们采取最简单的页表完成虚拟地址映射的话，每次访问数据都要两次内存访问（一次页表一次实际数据）。所以我们引出了cache page table(TLB)。</p>
</li>
<li>
<p>基本思路：发送 tag (VPN) 尝试匹配，并看访问类型是否违规。如果匹配成功，就把对应的 PPN 送到 Mux，将偏移量加上 PPN 得到物理地址。</p>
</li>
<li>
<p>页大小选择：</p>
<ul>
<li>更大的页：页表更小；cache命中时间更短（页更大，要遍历的少）；更高效（一次搬更多数据）；TLB miss次数更少（映射了更多内存）。</li>
<li>更小的页：内存的使用少；内部碎片少。</li>
</ul>
</li>
<li>
<p>由此我们可以结合上述两种优点设计 - multiple page sizes</p>
<ul>
<li>
<p>这个就是多级cache的图片，其中L1cache的index行为和TLB的物理虚拟地址转换是并行的，L1找不到再去L2找</p>
</li>
<li>
<p>这个图的位数计算好像是重点，需要会算，L1 cache tag那里应该是28不是43，tag判断一定是基于物理地址的，物理地址以字节为单位</p>
</li>
</ul>
<p><img alt="image-20241225215642714" src="../markdown-img/final_review.assets/image-20241225215642714.png" /></p>
</li>
<li>
<p>相关的计算：</p>
<ul>
<li><img alt="image-20241226203804720" src="../markdown-img/final_review.assets/image-20241226203804720.png" /></li>
</ul>
</li>
</ul>
<h2 id="4">4 指令集并行<a class="headerlink" href="#4" title="Permanent link">&para;</a></h2>
<p><em>对应考纲第三章 - ILP</em></p>
<ul>
<li>Scoreboard</li>
<li>Tomasulo</li>
</ul>
<h3 id="41-scoreboard">4.1 Scoreboard<a class="headerlink" href="#41-scoreboard" title="Permanent link">&para;</a></h3>
<p>执行流程：</p>
<ol>
<li><strong>IS</strong> - 顺序取指令，检测有无结构冲突（这里注意检查每个部件在设计的时候的个数，每种设计可能都不同）</li>
<li><strong>RO</strong> - 从这里开始就是乱序了，检测有无数据冲突，读取操作数</li>
<li>EX</li>
<li>WB</li>
<li><em>顺序提交，通过ROB实现</em></li>
</ol>
<p>在执行算法的时候，我们需要维护<strong>三个表格</strong>：</p>
<h4 id="411-instruction-status">4.1.1 Instruction Status<a class="headerlink" href="#411-instruction-status" title="Permanent link">&para;</a></h4>
<p>每条指令所在的阶段，具体的判断思路如下：</p>
<ol>
<li>指令顺序流入，每一拍流入一条指令</li>
<li>如果判定没有结构冒险，则可以进入IS阶段，否则要等待占用此结构单元的指令WB结束释放该单元后进入IS阶段</li>
<li>如果判定没有数据冒险，则可以进入RO阶段，否则需要等待对应操作数的指令WB结束后才可以进入RO阶段</li>
</ol>
<p>例子：</p>
<p><img alt="image-20241226170858673" src="../markdown-img/final_review.assets/image-20241226170858673.png" /></p>
<center>
    结构冲突：第6条指令等待第4条指令的ALU部件</br>
    数据冲突：第3、4条指令等待第2条指令的F2；第4、5条指令等待第1条指令的F6
</center>

<p><img alt="image-20241226170918355" src="../markdown-img/final_review.assets/image-20241226170918355.png" /></p>
<center>
    "when the FMUL.D is ready to write its result":</br>
    第3、4条指令：执行时间差异导致SUB执行完了但是MUL还在执行</br>
此时第6条指令由于第4条指令WB完毕，结构冲突消失，可以IS并且执行下面的步骤</br>
数据冲突：第5条指令等待第3条指令的F0，同时阻塞在RO阶段的时候也占有了F6导致第6条指令不能写回
</center>

<p><img alt="image-20241226170933714" src="../markdown-img/final_review.assets/image-20241226170933714.png" /></p>
<center>
    "when the FDIV.D is ready to write its result":</br>
    此时第5条指令由于第3条指令WB完毕，数据冲突消失，可以RO并且执行下面的步骤
</center>

<h4 id="412-function-component-status">4.1.2 Function Component Status<a class="headerlink" href="#412-function-component-status" title="Permanent link">&para;</a></h4>
<p>针对每个计算部件（<code>ld</code>、<code>sd</code>等指令是<code>Integer</code>部件）的状态记录。变量及其含义如下：</p>
<ul>
<li><code>busy</code> - 此单元是否有指令正在使用；<code>op</code> - 此单元正在执行哪个类型的指令；</li>
<li><code>Fi</code> - 目的操作数对应的寄存器；<code>Fj</code>、<code>Fk</code> - 源操作数对应的寄存器；</li>
<li><code>Qj</code>、<code>Qk</code> - 源操作数等待的部件</li>
<li><code>Rj</code>、<code>Rk</code> - 源操作数的状态，个人理解这应该是一个寄存器的“锁”<ul>
<li><code>yes</code> - 这个操作数已经准备好了但是还没有读，因为其他操作数还没有ready。<em>这个时候相当于给这个寄存器加了一个不能写入新数据的锁</em></li>
<li><code>no</code> - 我觉得这个字面意思就是没有加写入锁，具体状态需要结合<code>Qi</code>、<code>Qj</code>是否有等待部件决定：<ul>
<li><code>Qi / Qj == null</code> - 操作数已经读取完毕</li>
<li><code>Qi / Qj != null</code> - 正在等待<code>Q</code>中所指的部件的执行，操作数还没有ready</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>例子（分别对应4.1.1的三种情况）：</p>
<p><img alt="image-20241226184845056" src="../markdown-img/final_review.assets/image-20241226184845056.png" /></p>
<p><img alt="image-20241226184704534" src="../markdown-img/final_review.assets/image-20241226184704534.png" /></p>
<center>这里F6在Divide指令下的yes决定了add指令必须等F6被读完（Div的Rk变成no）之后才能WB</center>

<p><img alt="image-20241226184942207" src="../markdown-img/final_review.assets/image-20241226184942207.png" /></p>
<h4 id="413-register-status">4.1.3 Register Status<a class="headerlink" href="#413-register-status" title="Permanent link">&para;</a></h4>
<p>记录每个寄存器将被什么指令修改。</p>
<p>例子（分别对应4.1.1的三种情况）：</p>
<p><img alt="image-20241226190242144" src="../markdown-img/final_review.assets/image-20241226190242144.png" /></p>
<p><img alt="image-20241226190216399" src="../markdown-img/final_review.assets/image-20241226190216399.png" /></p>
<p><img alt="image-20241226190301319" src="../markdown-img/final_review.assets/image-20241226190301319.png" /></p>
<h3 id="42-tomasulo">4.2 Tomasulo<a class="headerlink" href="#42-tomasulo" title="Permanent link">&para;</a></h3>
<p>使用寄存器重命名解决name dependence。</p>
<h4 id="421-tomasulo">4.2.1 基本的Tomasulo结构<a class="headerlink" href="#421-tomasulo" title="Permanent link">&para;</a></h4>
<p><img alt="image-20241227141451276" src="../markdown-img/final_review.assets/image-20241227141451276.png" /></p>
<h5 id="4211">4.2.1.1 执行流程<a class="headerlink" href="#4211" title="Permanent link">&para;</a></h5>
<ol>
<li><strong>IS</strong> - 顺序取出队列中的指令放入保留站，如果有结构冲突则等待；进入保留站重命名消除WAR和WAW冒险。<ul>
<li>重命名：如果能读出来数值就直接读，如果需要等待则命名为等待的那个保留站。</li>
</ul>
</li>
<li><strong>EX</strong> - 等待保留站操作数全部就绪即可执行。<ul>
<li><code>ld</code>、<code>sd</code>指令多一步有效地址计算，IS之后执行地址计算然后再执行EX。</li>
</ul>
</li>
<li><strong>WB</strong> - 通过CDB总线将结果写回寄存器，并且通过广播将结果返回所有操作数等待的包含该保留站的保留站。释放保留站和<code>Qi</code>。</li>
</ol>
<h5 id="4212">4.2.1.2 数据表格<a class="headerlink" href="#4212" title="Permanent link">&para;</a></h5>
<ol>
<li><strong>Instruction status table</strong>: 和scoreboard差不多，状态变成了IS、EX、WB三个阶段。</li>
<li><strong>Reservation stations table</strong>: 功能部件状态表<ul>
<li><code>Busy</code>和<code>Op</code>和scoreboard一样</li>
<li><code>Vj</code>、<code>Vk</code> - 记录操作数的具体的值</li>
<li><code>Qj</code>、<code>Qk</code> - 记录操作数等待的保留站</li>
<li><code>A</code> - 记录<code>ld</code>、<code>sd</code>指令的取值/写入地址</li>
</ul>
</li>
<li><strong>Register status table</strong>: 记录保留站的结果往哪里写。</li>
</ol>
<p>例如上一组指令的两个时刻，三张表分别如下：</p>
<p><img alt="image-20241227142907965" src="../markdown-img/final_review.assets/image-20241227142907965.png" /></p>
<h5 id="4213">4.2.1.3 例题<a class="headerlink" href="#4213" title="Permanent link">&para;</a></h5>
<p><img alt="image-20241226212130247" src="../markdown-img/final_review.assets/image-20241226212130247.png" /></p>
<p><img alt="image-20241226212255100" src="../markdown-img/final_review.assets/image-20241226212255100.png" /></p>
<p>注意点：</p>
<ol>
<li>之前提到的scoreboard里面的F6被div上了锁，DIV读取之后ADD才能WB</li>
<li>IS段顺序流入，产生结构冲突只能等待</li>
<li>tomasulo里面<code>ld</code>、<code>sd</code>在IS之后EX之前需要额外一拍计算地址</li>
</ol>
<h4 id="422-rob-reorder-buffer">4.2.2 ROB (reorder buffer)<a class="headerlink" href="#422-rob-reorder-buffer" title="Permanent link">&para;</a></h4>
<p><img alt="image-20241227143016595" src="../markdown-img/final_review.assets/image-20241227143016595.png" /></p>
<h5 id="4221">4.2.2.1 执行顺序<a class="headerlink" href="#4221" title="Permanent link">&para;</a></h5>
<p>为保证指令顺序提交（流出），添加一个ROB部件，并且修改WB状态为WB和commit两个状态：</p>
<ul>
<li><strong>WB</strong> - 通过CDB总线将结果写到ROB，并且通过广播将结果返回所有操作数等待的包含该指令的保留站。释放保留站和<code>Qi</code>。</li>
<li><strong>commit</strong> - 确认前面的指令都已经提交后，将ROB的结果写到寄存器里。</li>
</ul>
<h5 id="4222">4.2.2.2 数据表格<a class="headerlink" href="#4222" title="Permanent link">&para;</a></h5>
<ol>
<li><strong>Reservation Station</strong>: 记录保留站的数据，和没有ROB的table差不多，将<code>Qj</code>和<code>Qk</code>记录的内容变成了ROB内指令的序号，增加了<code>Dest</code>列记录写入的ROB的序号。</li>
<li><strong>Reorder Buffer</strong>: 记录每个序号对应的是否busy及对应指令、状态、写入的目标寄存器和写入的值。</li>
<li><strong>Register Status</strong>: 记录对应的寄存器将被哪个ROB内的指令修改。</li>
</ol>
<p><img alt="image-20241227145049394" src="../markdown-img/final_review.assets/image-20241227145049394.png" /></p>
<h5 id="4223">4.2.2.3 例题<a class="headerlink" href="#4223" title="Permanent link">&para;</a></h5>
<p>在上一道例题的基础上加一个commit状态，即在当前指令的WB结束且之前所有指令均commit之后可以commit：</p>
<p><img alt="image-20241227145210137" src="../markdown-img/final_review.assets/image-20241227145210137.png" /></p>
<h3 id="43">4.3 多流出的流水线<a class="headerlink" href="#43" title="Permanent link">&para;</a></h3>
<p><img alt="image-20241226213519954" src="../markdown-img/final_review.assets/image-20241226213519954.png" /></p>
<h4 id="431-superscalar">4.3.1 Superscalar<a class="headerlink" href="#431-superscalar" title="Permanent link">&para;</a></h4>
<h5 id="4311">4.3.1.1 静态调度超标量<a class="headerlink" href="#4311" title="Permanent link">&para;</a></h5>
<p>通过编译器完成。</p>
<p>每个时钟周期流出一个整型指令和一个浮点数指令，并行执行。</p>
<p><img alt="image-20241227150601230" src="../markdown-img/final_review.assets/image-20241227150601230.png" /></p>
<p>如果遇到了分支跳转指令，那么只流出这一条，不能和其他指令一起流出。</p>
<p>分支预测逻辑和普通流水线一致。</p>
<h5 id="4312">4.3.1.2 动态调度超标量<a class="headerlink" href="#4312" title="Permanent link">&para;</a></h5>
<p>通过硬件完成。</p>
<p>指令顺序进入两个保留站，并行分开处理。</p>
<p><img alt="image-20241227150823540" src="../markdown-img/final_review.assets/image-20241227150823540.png" /></p>
<p>对于没有分支预测的情况，需要等待分支预测结果然后相关指令再进入EX阶段。</p>
<h4 id="432-super-pipeline">4.3.2 Super pipeline<a class="headerlink" href="#432-super-pipeline" title="Permanent link">&para;</a></h4>
<p>本质是流水线的细分，需要硬件的支持。</p>
<p><img alt="image-20241227145728625" src="../markdown-img/final_review.assets/image-20241227145728625.png" /></p>
<h4 id="433-vliw">4.3.3 VLIW<a class="headerlink" href="#433-vliw" title="Permanent link">&para;</a></h4>
<p>把比较复杂的阶段拆指令并行，通过编译器完成。</p>
<p><img alt="image-20241227150053557" src="../markdown-img/final_review.assets/image-20241227150053557.png" /></p>
<h2 id="5-dlp">5 DLP<a class="headerlink" href="#5-dlp" title="Permanent link">&para;</a></h2>
<p><em>对应考纲第四章 - DLP</em></p>
<ul>
<li>vector</li>
<li>SIMD</li>
<li>GPU</li>
</ul>
<p>情报：</p>
<ul>
<li>以Cray-1为例做的各个部分的分析（考试可能会改）</li>
<li>向量处理机的优化 - 重点是link，分析能不能link，各种情况，给一段程序分析哪里可以链接可能不止一处，怎么分析clock cycle</li>
<li>RV64V、NVIDIA GPU的向量技术</li>
<li>和循环有关的并行Loop-Level Parallelism，如果是跨迭代相关就没法做向量链接了，如何消除</li>
</ul>
<h3 id="51-simd-vector-processor">5.1 SIMD - Vector Processor<a class="headerlink" href="#51-simd-vector-processor" title="Permanent link">&para;</a></h3>
<p>SIMD为单指令流多数据流。</p>
<h4 id="511">5.1.1 向量基本计算方式<a class="headerlink" href="#511" title="Permanent link">&para;</a></h4>
<ul>
<li>Horizonal processing method 横向计算 - 逐个元素计算拼成结果向量</li>
<li>Vertical procession method 纵向计算 - 按照功能逐个操作（加、乘）计算</li>
<li>Horizonal and vertical processing method - 一个向量装不下所有数据：分组计算，组内纵向，组间横向</li>
</ul>
<p>计算过程的硬件架构：</p>
<p><img alt="image-20241228153215083" src="../markdown-img/final_review.assets/image-20241228153215083.png" /></p>
<h4 id="512-cray-1">5.1.2 CRAY-1及其分析<a class="headerlink" href="#512-cray-1" title="Permanent link">&para;</a></h4>
<p>基本架构：</p>
<p><img alt="image-20241228153829469" src="../markdown-img/final_review.assets/image-20241228153829469.png" /></p>
<h5 id="5121">5.1.2.1 向量指令相关性及其处理<a class="headerlink" href="#5121" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>Vi conflict - 向量寄存器之间的依赖性，需要等待前一条指令的向量的<strong>第一个元素计算完</strong>再开始后续的指令。</p>
</li>
<li>
<p>RAW
    $V0 \leftarrow V1 + V2 $
    <span class="arithmatex">\(V3 \leftarrow V0\times V4\)</span></p>
</li>
<li>
<p>RAR
    <span class="arithmatex">\(V0 \leftarrow V1 + V2\)</span>
    <span class="arithmatex">\(V3 \leftarrow V1 \times V4\)</span></p>
</li>
<li>
<p>Functional conflict - 部件的结构冲突，必须等待前一条指令<strong>最后一个元素完成</strong>再开始后续的指令。</p>
</li>
</ul>
<h5 id="5122-cray-1">5.1.2.2 CRAY-1指令类型<a class="headerlink" href="#5122-cray-1" title="Permanent link">&para;</a></h5>
<p><img alt="image-20241229203144456" src="../markdown-img/final_review.assets/image-20241229203144456.png" /></p>
<ul>
<li>向量和向量计算</li>
<li>向量和标量计算</li>
<li>向量读取</li>
<li>向量存储</li>
</ul>
<h5 id="5123-cray-1">5.1.2.3 CRAY-1的向量链接技术<a class="headerlink" href="#5123-cray-1" title="Permanent link">&para;</a></h5>
<p>在向量处理机的优化中，我们有以下几种技术：</p>
<ul>
<li>增加功能部件使其并行工作</li>
<li>采用多处理器系统</li>
<li>采取recycling mining technology (?)</li>
</ul>
<p>上述都依赖于增加部件，在这里我们关注<strong>向量链接技术</strong>。</p>
<p>基本应用场景是：两条指令第一条指令的结果是第二条指令的输入的时候，可以链接向量减少一次读写时间。</p>
<p><em>这里的链接条件存疑，我上课记的是：后面的刚好要用到前面的且没有功能部件冲突，且两个操作数在同一拍准备好。后面的减少一次读写时间也存疑，个人理解的链接的本质是两条短指令变成一条长指令。</em></p>
<p>在例题计算的时候，没有冲突的指令<strong>并行</strong>，存在RAW的指令<strong>链接</strong>，存在结构冲突的指令<strong>串行</strong>；向量功能内部<strong>流水线执行</strong>。</p>
<p>例子（抄到A4上）：</p>
<p>题目条件：</p>
<ul>
<li>向量加法、读写需要6拍，向量乘法需要7拍；</li>
<li>把数据从寄存器送到功能部件需要1拍，功能部件结果写回寄存器需要1拍，数据从内存送到fetch function unit需要1拍；</li>
<li>计算<span class="arithmatex">\(D = A \times (B + C)\)</span>，vector of length <span class="arithmatex">\(N\)</span>，且<span class="arithmatex">\(B\)</span>和<span class="arithmatex">\(C\)</span>已经被存在<span class="arithmatex">\(V0\)</span>和<span class="arithmatex">\(V1\)</span>中。</li>
</ul>
<p>解法：</p>
<p><img alt="image-20241229205006268" src="../markdown-img/final_review.assets/image-20241229205006268.png" /></p>
<ol>
<li>
<p>三条指令串行的情况
    经过8拍<span class="arithmatex">\(V0\)</span>的第一个元素到达<span class="arithmatex">\(V2\)</span>，那么再过<span class="arithmatex">\((N-1)\)</span>拍<span class="arithmatex">\(V0\)</span>的最后一个元素就会到达<span class="arithmatex">\(V2\)</span>。
    因此总共需要<span class="arithmatex">\([(1+6+1)+N-1] + [(1+6+1)+N-1] + [(1+7+1)+N-1] = 3N+22\)</span>拍。</p>
</li>
<li>
<p>前两条指令并行、和第三条指令串行的情况
    <span class="arithmatex">\(max{[(1+6+1)+N-1], [(1+6+1)+N-1]} + [(1+7+1)+N-1] = 2N+15\)</span></p>
</li>
<li>
<p>采用向量链接技术
    我们只需要知道<span class="arithmatex">\(V4\)</span>的第一个结果多久可以出来：<span class="arithmatex">\(8+1+7+1=17\)</span>拍，随后还有<span class="arithmatex">\((N-1)\)</span>条指令，因此总共需要的拍数为<span class="arithmatex">\(max{(1+6+1), (1+6+1)} + (1+7+1)+N-1 = N+16\)</span>拍。</p>
</li>
</ol>
<h4 id="513-rv64v">5.1.3 RV64V<a class="headerlink" href="#513-rv64v" title="Permanent link">&para;</a></h4>
<p><img alt="image-20241229211207053" src="../markdown-img/final_review.assets/image-20241229211207053.png" /></p>
<p><em>这页复习ppt是今年新加的，但是我不知道能怎么考，先抄A4上吧</em></p>
<p>标量处理和向量处理的汇编代码区别：</p>
<p><img alt="image-20241229212249685" src="../markdown-img/final_review.assets/image-20241229212249685.png" /></p>
<p>因为循环之间没有迭代相关（和跨迭代循环的数据相关），所以可以转化为向量运算，大大减少了指令条数。</p>
<p>还有一个例子：</p>
<p><img alt="image-20241229212747163" src="../markdown-img/final_review.assets/image-20241229212747163.png" /></p>
<h4 id="514-nvidia-gpu">5.1.4 NVIDIA GPU<a class="headerlink" href="#514-nvidia-gpu" title="Permanent link">&para;</a></h4>
<p>还是属于SIMD的范畴。</p>
<p>内存管理：</p>
<p><img alt="image-20241229213936618" src="../markdown-img/final_review.assets/image-20241229213936618.png" /></p>
<ul>
<li>
<p>和向量机的相同之处：</p>
<ul>
<li>可以很好地处理数据级别的并行问题</li>
<li>Scatter-gather transfers 分散-聚集传输方式</li>
<li>Mask registers</li>
<li>Large register files</li>
</ul>
</li>
<li>
<p>和向量机的不同之处：</p>
<ul>
<li>
<p>没有标量处理机</p>
</li>
<li>
<p>采用多线程隐藏内存延迟</p>
</li>
<li>
<p>拥有多个功能单元，而不像向量处理器那样只有少数几个深度流水线单元</p>
</li>
<li>
<p>增加了硬件实现的线程调度机制，更快速和稳定</p>
</li>
</ul>
<p><img alt="image-20241229213805412" src="../markdown-img/final_review.assets/image-20241229213805412.png" /></p>
</li>
</ul>
<h3 id="52-llp">5.2 LLP<a class="headerlink" href="#52-llp" title="Permanent link">&para;</a></h3>
<p>循环的并行是提升并行性的源泉。但是很多时候的并行需要条件判断。</p>
<ol>
<li>
<p>没有跨迭代相关的情况，直接并行</p>
<p><img alt="image-20241229214838829" src="../markdown-img/final_review.assets/image-20241229214838829.png" /></p>
</li>
<li>
<p>有跨迭代相关但是可以消除</p>
<p><em>个人认为消除跨迭代相关的本质是不让B[i]和B[i+1]出现在一个循环里，把相关性放到同一个循环内</em></p>
<p>本次循环两个指令相关可以使用向量链接技术解决</p>
<p><img alt="image-20241229215659222" src="../markdown-img/final_review.assets/image-20241229215659222.png" /></p>
</li>
<li>
<p>无法消除的跨迭代循环（两条指令都跨迭代相关）</p>
<p><img alt="image-20241229215302740" src="../markdown-img/final_review.assets/image-20241229215302740.png" /></p>
</li>
</ol>
<p>相关性的判断与通过重命名解决dependency：</p>
<ul>
<li>数据相关（RAW）：<img alt="image-20241229220627960" src="../markdown-img/final_review.assets/image-20241229220627960.png" /></li>
<li>名相关（anti-dependence）：<img alt="image-20241229220723808" src="../markdown-img/final_review.assets/image-20241229220723808.png" /></li>
<li>输出相关（output-dependence）：<img alt="image-20241229220819052" src="../markdown-img/final_review.assets/image-20241229220819052.png" /></li>
<li>上图的右边展示了重命名消除相关性的方式：数据相关的寄存器名保存一致，其他的相关的寄存器名改成不一致的。（这个例子没有跨迭代相关）</li>
</ul>
<h2 id="6-tlp">6 TLP<a class="headerlink" href="#6-tlp" title="Permanent link">&para;</a></h2>
<p>对应考纲第五章 - TLP</p>
<ul>
<li>Cache coherence</li>
</ul>
<p><img alt="image-20241229221138884" src="../markdown-img/final_review.assets/image-20241229221138884.png" /></p>
<h3 id="61">6.1 多处理器的内存架构<a class="headerlink" href="#61" title="Permanent link">&para;</a></h3>
<h4 id="611-shared-memory-system">6.1.1 Shared Memory System<a class="headerlink" href="#611-shared-memory-system" title="Permanent link">&para;</a></h4>
<p><img alt="image-20241229221515158" src="../markdown-img/final_review.assets/image-20241229221515158.png" /></p>
<p>有一个共同的地址空间，有一个统一的操作系统管理内存、给不同进程使用内存。</p>
<h4 id="612-message-passing-system">6.1.2 Message Passing System<a class="headerlink" href="#612-message-passing-system" title="Permanent link">&para;</a></h4>
<p><img alt="image-20241229225820062" src="../markdown-img/final_review.assets/image-20241229225820062.png" /></p>
<p>每一个进程都要自己的内存，通过ICN（互联网线）传递信息，可以共同完成任务；每一个进程都有自己的OS，可以分层，ICN连其他ICN：</p>
<p><img alt="image-20241229230030150" src="../markdown-img/final_review.assets/image-20241229230030150.png" /></p>
<h4 id="613-uma">6.1.3 UMA<a class="headerlink" href="#613-uma" title="Permanent link">&para;</a></h4>
<p><img alt="image-20241229230223214" src="../markdown-img/final_review.assets/image-20241229230223214.png" /></p>
<ul>
<li>所有的物理存储器，由所有的进程一起使用，<strong>均匀共享</strong>，即没有进程对某个存储器有特殊的访问权限，访问的时间相同，即不存在谁离谁更近的问题。</li>
<li>进程可以有自己的拓展，比如 cache、IO、local memory；每个CPU也可以有自己的私有内存和cache。</li>
<li>因为他的高度共享性，UMA 也叫紧耦合系统。</li>
<li>UMA又叫<strong>SMP</strong> - 对称多处理机或者centralized shared-memory multiprocessors。</li>
</ul>
<h4 id="614-numa">6.1.4 NUMA<a class="headerlink" href="#614-numa" title="Permanent link">&para;</a></h4>
<p><img alt="image-20241229230436013" src="../markdown-img/final_review.assets/image-20241229230436013.png" /></p>
<ul>
<li>
<p>对某个进程都自己的 local memory，由 ICN 连起来。</p>
</li>
<li>
<p>被共享的存储器是不均匀的。访问自己的 <strong>local memory 最快</strong>，访问别人的慢。</p>
</li>
<li>
<p>进程也可以有自己的拓展。</p>
</li>
<li>
<p>NUMA 有两种拓展：</p>
<ul>
<li>
<p>NC-NUMA: Non Cache NUMA 没cache</p>
<p><img alt="image-20241229230544954" src="../markdown-img/final_review.assets/image-20241229230544954.png" /></p>
</li>
<li>
<p>CC-NUMA: Coherent Cache NUMA 有cache</p>
<p>有自己的 cache 和目录，存在 cache 一致性的问题。当有一个数据改了，如何保证其他 cache 里的数据的正确性。多个cache从表现上不存在内存的不统一，好像只有一个cache一样。</p>
<p><img alt="image-20241229230559153" src="../markdown-img/final_review.assets/image-20241229230559153.png" /></p>
</li>
</ul>
</li>
<li>
<p>NUMA又叫<strong>distributed shared-memory multiprocessor (DSP)</strong>。</p>
</li>
</ul>
<div align = center><img src="https://cdn.hobbitqia.cc/20240110205135.png" width=55%></div>

<h3 id="62-cache-coherence-and-memory-consistency">6.2 Cache coherence and memory consistency<a class="headerlink" href="#62-cache-coherence-and-memory-consistency" title="Permanent link">&para;</a></h3>
<p>状态机不用抄，给协议会分析就可以。</p>
<p>在Memory Consistency中，对一组先写后读的指令先读后写是错误的，需要一个model保证指令执行的顺序性。</p>
<p>而对于Cache Coherence而言，我们面对的问题是可能有多个 cache，都放有内存拷贝的数据，可能不一致。我们一般通过一个协议来约定，使得cpu在任意一个cache里面读数据，读出来的一定是最新的数据（即刚被写过的值）。最直接的思路就是让包含过期数据的cache失效。</p>
<h4 id="621-snoopy-coherence-protocol">6.2.1 Snoopy Coherence Protocol<a class="headerlink" href="#621-snoopy-coherence-protocol" title="Permanent link">&para;</a></h4>
<p>总线监听协议，适用于UMA(SMP)，所有处理器监听总线，由总线广播失效信息或更新数据。</p>
<p>针对不同的写策略，有不同的协议：</p>
<h5 id="6211-write-through">6.2.1.1 Write Through<a class="headerlink" href="#6211-write-through" title="Permanent link">&para;</a></h5>
<p><img alt="image-20241230160454687" src="../markdown-img/final_review.assets/image-20241230160454687.png" /></p>
<h5 id="6212-write-back">6.2.1.2 Write back<a class="headerlink" href="#6212-write-back" title="Permanent link">&para;</a></h5>
<p><strong>MSI</strong></p>
<p>状态：</p>
<ul>
<li>Invalid: 缓存块无效，不能被使用；</li>
<li>Shared: 缓存块未被修改，且可能存在于多个缓存中，内存中的数据是最新的；</li>
<li>Modified: 缓存行已被修改，且该缓存行是唯一的有效副本，内存中的数据已过时。</li>
</ul>
<p>转换逻辑：</p>
<p><img alt="image-20241230160611040" src="../markdown-img/final_review.assets/image-20241230160611040.png" /></p>
<p>详解：（<a href="https://blog.csdn.net/violet_echo_0908/article/details/78839692">来源</a>）</p>
<p><img alt="image-20241230163644742" src="../markdown-img/final_review.assets/image-20241230163644742.png" /></p>
<p><strong>MESI</strong></p>
<p>状态：</p>
<ul>
<li>Invalid: 缓存块无效，不能被使用；</li>
<li>Shared: 缓存块未被修改，且可能存在于多个缓存中，内存中的数据是最新的；</li>
<li>Modified: 缓存行已被修改，且该缓存行是唯一的有效副本，内存中的数据已过时；</li>
<li>Exclusive：缓存块未被修改，且是唯一的有效副本，内存中的数据是最新的。</li>
</ul>
<p>转换逻辑：</p>
<p><img alt="image-20241230160902562" src="../markdown-img/final_review.assets/image-20241230160902562.png" /></p>
<p>例子：</p>
<p><img alt="image-20241230160925708" src="../markdown-img/final_review.assets/image-20241230160925708.png" /></p>
<p><strong>MOESI</strong></p>
<p>添加状态：</p>
<ul>
<li>Owned: 缓存块已被修改，可以存在于多个缓存中，内存中的数据已过时，但其他缓存可以从拥</li>
</ul>
<p>有该缓存行的缓存中读取数据。</p>
<h5 id="6213-false-sharing">6.2.1.3 False Sharing<a class="headerlink" href="#6213-false-sharing" title="Permanent link">&para;</a></h5>
<p>本身两个线程之间的变量没有关系，但是在同一个cacheline里面，会导致cache的状态频繁切换，性能降低：</p>
<ol>
<li>多个处理器在同一个缓存块中存储不同的数据。</li>
<li>一个处理器修改了缓存块中的数据，导致其他处理器的缓存块失效。</li>
<li>其他处理器必须重新加载缓存块，即使它们访问的数据没有被修改</li>
</ol>
<p>可通过内存填充，把两个变量分别放到两个 Cache：</p>
<p><img alt="image-20241230161218771" src="../markdown-img/final_review.assets/image-20241230161218771.png" /></p>
<h4 id="622-directory-protocol">6.2.2 Directory Protocol<a class="headerlink" href="#622-directory-protocol" title="Permanent link">&para;</a></h4>
<p>目录协议，适用于NUMA(DSP)，用分布式目录记录系统中的哪些处理器在缓存中拥有某些存储块的副本，通过目录”点对点“发送失效信息。</p>
<p>就是是把 cache block 的共享信息存放在一个固定的地方，这个地方我们称之为 directory：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>| State | Owner | Share List |
State: Block 的状态
Share List: 当前拥有该 Cache Block 拷贝的节点列表 
</code></pre></div></td></tr></table></div>
<p>对每个缓存块，维护其状态(MSI Protocol)</p>
<ul>
<li>Shared：一个或多个目录拥有这个缓存块，且值是最新的</li>
<li>Invalid</li>
<li>Modified：正好一个目录拥有这个缓存块，在内存中的值已经过时  </li>
</ul>
<p>对每个目录，维护其状态：</p>
<ul>
<li>Uncached</li>
<li>Shared</li>
<li>Exclusive</li>
</ul>
<p>单个缓存块的 state transition diagram 如下：</p>
<p><img alt="image-20241230161738603" src="../markdown-img/final_review.assets/image-20241230161738603.png" /></p>
<center>来自本地处理器的请求显示为黑色，来自主目录的请求显示为灰色。</center>

<p>目录的 state transition diagram 如下：</p>
<p><img alt="image-20241230161813346" src="../markdown-img/final_review.assets/image-20241230161813346.png" /></p>
<center>所有的动作都是灰色的，因为它们都是外部引起的。</center>

<p>和 MSI 的 transition 是类似的</p>
<h4 id="623-memory-consistency">6.2.3 Memory consistency<a class="headerlink" href="#623-memory-consistency" title="Permanent link">&para;</a></h4>
<p>基本规则：X → Y，操作 X 必须在操作 Y 前完成</p>
<p>顺序一致性 Sequential Consistency</p>
<ul>
<li>Accesses on each processor were kept in order</li>
<li>Accesses on different processors were arbitrarily interleaved</li>
<li>R → W：读操作必须在写操作之前完成。</li>
<li>R → R：读操作必须在另一个读操作之前完成。</li>
<li>W → R：写操作必须在读操作之前完成。</li>
<li>W → W：写操作必须在另一个写操作之前完成。</li>
</ul>
<p>松散一致性模型 Relaxed Consistency Models</p>
<ul>
<li>allow reads and writes to complete out of order, but to use synchronization operations to enforce ordering
  允许读和写无序完成，但使用同步操作强制排序</li>
<li>Relax W → R：允许写操作在读操作之前完成</li>
<li>Relax W → W：允许写操作在另一个写操作之前完成</li>
<li>Relax R → W and R → R：允许读操作在写操作和另一个读操作之前完成</li>
</ul>
<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.sections", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="https://gcore.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>